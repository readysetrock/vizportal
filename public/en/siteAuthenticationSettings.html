<div class="tb-tabs-banner-subplace"><div class="tb-scroll"><div class="tb-settings-container tb-settings-section"><div class="tb-site-authentication"><div class="tb-setting-group"><div class="tb-group-name">Connected clients</div><div class="tb-group-content"><div class="tb-settings-msg">Tableau clients such as mobile apps, sync client, and others can stay authenticated to this site after the user provides sign-in credentials the first time. Connections are established using secure tokens that uniquely identify each user and client, without storing the user's credentials.</div><tb:checkbox-group><tb:checkbox ng-model="siteSettingsForSiteAdmin.siteAdminSettings.refreshTokenEnabled"></tb:checkbox><tb:checkbox-label>Allow connected clients on this Tableau Online site.</tb:checkbox-label></tb:checkbox-group></div></div><div class="tb-setting-group"><div class="tb-connected-clients"></div><div class="tb-group-name">Authentication for this site</div><div ng-if="!allowed" class="tb-settings-msg"><div ng-bind-html="contactCustomerSupport() | locLinkifier"></div></div><div class="tb-group-content"><div class="tb-static-checkmark"></div><div class="tb-checkbox-label">TableauID</div><div class="tb-checkbox-indent">Default authentication type for all sites</div></div><div tb-disabled="!allowed" class="tb-group-content"><tb:checkbox-group><tb:checkbox ng-model="configuration.enabled" tb-disabled="!allowed"></tb:checkbox><tb:checkbox-label>Single sign-on with SAML</tb:checkbox-label><span ng-if="configuration.enabled" class="tb-enabled-color">&nbsp;-&nbsp;SAML is enabled</span><span ng-if="!configuration.enabled">&nbsp;-&nbsp;SAML is not enabled</span></tb:checkbox-group><div class="tb-checkbox-indent">To enable single sign-on, you must have an identity provider (IdP) that supports SAML and email addresses for each user that map to email addresses in your IdP.</div><div class="tb-checkbox-indent">&nbsp;</div><div class="tb-checkbox-indent">Follow the steps below to use SAML for single sign-on.</div></div></div><div tb-disabled="!isEnabled()" class="tb-site-authentication-settings"><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">1</span>Export metadata file from Tableau Online</div><div class="tb-group-content">Select an option for obtaining metadata required by the IdP.<div class="tb-auth-options-list"><div class="tb-auth-options-list-item">&#x25cf;&nbsp;Save a single XML file that contains all required metadata.&nbsp;<input type="button" value="Export metadata" tb-button-click="download($event, configuration.serviceProviderEntityId)" tb-disabled="!isEnabled()" class="tb-outline-button"/></div><div>or</div><div class="tb-auth-options-list-item">&#x25cf;&nbsp;Copy the Tableau Online entity ID and ACS URL individually, and download the X.509 certificate to a CER file.</div></div><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">Tableau Online entity ID</div><input type="text" readonly="readonly" value="{{configuration.serviceProviderEntityId}}" tb-disabled="!isEnabled()" class="tb-url-holder"/></div><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">Assertion Consumer Service URL (ACS)</div><input type="text" readonly="readonly" value="{{configuration.acsUrl}}" tb-disabled="!isEnabled()" class="tb-url-holder"/></div></div><div class="tb-auth-options-right-align"><input type="button" value="Download signing and encryption certificate" tb-button-click="download($event, configuration.certificateUrl)" tb-disabled="!isEnabled()" class="tb-outline-button"/></div></div><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">2</span><span class="tb-dark-highlight">External Step:</span>&nbsp;Import metadata file to IdP</div><div class="tb-group-content">Go to your identity provider's site and follow the instructions they provide for configuring SAML.  Depending on your IdP, you will either import the metadata file that you exported in step 1, or add the Entity ID, ACS URL, and certificate individually.</div></div><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">3</span><span class="tb-dark-highlight">External Step:</span>&nbsp;Export metadata file from IdP</div><div class="tb-group-content">Export metadata file from IdP or construct your own metadata file.</div></div><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">4</span>Import metadata file into Tableau Online</div><form action="{{endpoint}}" enctype="multipart/form-data" method="POST" target="{{iframeId}}" name="updateIdentityProviderForm" class="tb-form-indent"><tb:file-input filename-localization-key="siteAuthenticationIdPMetadataFile" name="entity_descriptor" required="required" class="tb-padded-box"></tb:file-input><input type="hidden" value="{{xsrfToken}}" name="XSRF-TOKEN"/><span class="tb-padded-box"><button type="submit" tb-disabled="!isEnabled()" translate="apply" class="tb-outline-button"></button></span><tb:upload-iframe iframe-id="iframeId" name="{{iframeId}}" handle-result="handleFormSubmitResult(result)"></tb:upload-iframe></form><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">IdP Entity ID</div><input type="text" readonly="readonly" value="{{configuration.identityProviderEntityId}}" tb-disabled="!isIdentityProviderConfigured()" class="tb-url-holder"/></div><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">SSO Service URL</div><input type="text" readonly="readonly" value="{{configuration.ssoServiceURL}}" tb-disabled="!isIdentityProviderConfigured()" class="tb-url-holder"/></div><div ng-show="isIdentityProviderConfigured() &amp;&amp; configuration.isSingleLogoutSupported" class="tb-auth-options-left-margin">IdP is configured to support SAML single logout (SLO)</div><div ng-show="isIdentityProviderConfigured() &amp;&amp; !configuration.isSingleLogoutSupported" class="tb-auth-options-left-margin">IdP is not configured to support SAML single logout (SLO)</div><div class="tb-auth-options-right-align tb-label-padding"><input type="button" value="Test Login" tb-button-click="testLogin()" tb-disabled="!isIdentityProviderConfigured()" class="tb-outline-button tb-float-left tb-auth-options-left-margin"/><input type="button" value="Remove Identity Provider" tb-button-click="removeIdentityProvider()" tb-disabled="!isIdentityProviderConfigured()" class="tb-outline-button"/></div></div><!-- this will be probably inside a form when the functionality is implemented--><div tb-disabled="!isIdentityProviderConfigured()" class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">5</span>Match assertions</div><div class="tb-group-content">Assertions contain authentication and other attributes about a user.  Here you can specify the IdP assertion names that contain the information Tableau Online requires. You can find assertion names in the IdP's SAML configuration.</div><div class="tb-group-content tb-auth-assertions tb-label-padding"><span class="tb-auth-table-header tb-auth-table-header-left">Tableau Online Attribute</span><span class="tb-auth-table-header tb-auth-table-header-right">Identity Provider (IdP) Assertion Name</span><table><tr><td>Email<br/>Email addresses must match for successful authentication</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.emailMapping" tb-disabled="!isIdentityProviderConfigured()"></tb:text-box></td></tr></table><table><tr><td colspan="3">Display Name</td></tr><tr><td colspan="3">Provide an assertion name for first name and last name, or for the full name, based on how the IdP stores this information. Tableau Online uses these assertions to set the display name.</td></tr><tr class="tb-auth-assertion-grouping"><td rowspan="2" class="tb-auth-assertions-radio"><input type="radio" name="assertion" tb-disabled="!isIdentityProviderConfigured()" ng-model="configuration.siteSAMLAttributeMapping.useFullName" ng-value="false"/></td><td class="tb-auth-assertions-radio-label">First name</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.firstNameMapping" tb-disabled="!isIdentityProviderConfigured() || configuration.siteSAMLAttributeMapping.useFullName"></tb:text-box></td></tr><tr class="tb-auth-assertion-grouping"><td class="tb-auth-assertions-radio-label">Last name</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.lastNameMapping" tb-disabled="!isIdentityProviderConfigured() || configuration.siteSAMLAttributeMapping.useFullName"></tb:text-box></td></tr><tr><td colspan="3"></td></tr><tr class="tb-auth-assertion-grouping"><td class="tb-auth-assertions-radio"><input type="radio" name="assertion" tb-disabled="!isIdentityProviderConfigured()" ng-model="configuration.siteSAMLAttributeMapping.useFullName" ng-value="true"/></td><td class="tb-auth-assertions-radio-label">Full name</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.fullNameMapping" tb-disabled="!isIdentityProviderConfigured() || !configuration.siteSAMLAttributeMapping.useFullName"></tb:text-box></td></tr></table><div class="tb-auth-options-right-align"><button type="submit" tb-disabled="!isEnabled()" translate="apply" tb-button-click="setSiteAttributeMapping()" class="tb-outline-button"></button></div></div></div><div tb-disabled="!isIdentityProviderConfigured()" class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">6</span>Select Users</div><div class="tb-group-content">Specify which users can sign in with SAML</div><div class="tb-group-content tb-users"><table><tr><td class="tb-users-link"><a ui-sref="main.site.users">View Users</a></td><td>&nbsp;-&nbsp;select users from your Tableau Online user list</td></tr><tr><td class="tb-users-link"><a ng-click="openAddExternalUsersDialog($event)">Add Users</a></td><td>&nbsp;-&nbsp;type email addresses of new users</td></tr></table></div></div><div tb-disabled="!isIdentityProviderConfigured()" class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">7</span>Authenticate with Tableau Online</div><div class="tb-group-content">Approved users can now use single sign-on to access Tableau Online<br/>If users experience authentication issues you can troubleshoot them by taking the following actions:<div class="tb-auth-options-list"><div class="tb-auth-options-list-item">&#x25cf;&nbsp;Troubleshoot assertion matching issues (step 5)&nbsp;<input type="button" value="Download log file" tb-button-click="download($event, downloadLogUrl())" tb-disabled="!isIdentityProviderConfigured()" class="tb-outline-button"/></div><div class="tb-auth-options-list-item">&#x25cf;&nbsp;Re-export data, certificates from Online to the IdP (steps 1-3)</div><div class="tb-auth-options-list-item">&#x25cf;&nbsp;Re-load new metadata file (step 4)</div></div><div>Disable SAML by clearing the Single sign-on with SAML checkbox at the top of this page</div></div></div></div></div></div></div></div>