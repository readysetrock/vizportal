<form name="$parent.addLocalUserForm" autocomplete="off" novalidate="novalidate" ng-submit="confirm()" class="tb-add-local-user"><div class="tb-dialog-title">New Local User</div><table class="tb-form-table"><tr><td class="tb-text-input-label-cell"><label>Username:</label></td><td class="tb-settings-control tb-input-wide"><tb:text-box tb-text-box-model="formModel.username" tb-text-box-focus="true" tb-text-box-required="true" tb-text-box-max-length="100" ng-keyup="_.debounce(checkDoesUsernameExists(formModel.username), 200)" tb-text-box-validation="tb-username-input-validator" tb-test-id="add-local-user-user-name-textbox" tb-text-box-disabled="busy"></tb:text-box><div ng-if="isQuotaEnabledForSite" translate="availableQuota" translate-values="{ NUM_USERS: availableQuota }" translate-interpolation="localizedCountEscaped" class="tb-available-quota tb-row"></div></td></tr><tbody ng-if="(formModel.formState === 'newUser')" class="tb-newUserFlow-table"><tr><td></td><td class="tb-available-cell"><span class="tb-available-text">{{ formModel.newUserFlowModel.usernameInfo }}</span></td></tr><tr><td class="tb-text-input-label-cell"><label>Display name:</label></td><td class="tb-settings-control tb-input-wide"><tb:text-box tb-text-box-model="formModel.newUserFlowModel.displayName" tb-text-box-required="true" tb-text-box-max-length="100" tb-test-id="add-local-user-display-name-textbox" tb-text-box-disabled="busy"></tb:text-box></td></tr><tr><td class="tb-text-input-label-cell"><label>Password:</label></td><td class="tb-settings-control tb-input-wide"><tb:password-box tb-text-box-model="formModel.newUserFlowModel.password" tb-text-box-required="true" tb-text-box-max-length="100" tb-test-id="add-local-user-password-textbox" tb-text-box-disabled="busy"></tb:password-box></td></tr><tr><td class="tb-text-input-label-cell"><label>Confirm password:</label></td><td class="tb-settings-control tb-input-wide"><tb:password-box tb-text-box-model="formModel.newUserFlowModel.confirmPassword" tb-text-box-required="true" tb-text-box-max-length="100" tb-text-box-validation="tb-matching-inputs-validator" tb-match-data="formModel.newUserFlowModel.password" tb-test-id="add-local-user-confirm-password-textbox" tb-text-box-disabled="busy"></tb:password-box></td></tr><tr><td class="tb-text-input-label-cell"><label>Email (optional):</label></td><td class="tb-settings-control tb-input-wide"><tb:text-box tb-text-box-model="formModel.newUserFlowModel.email" tb-text-box-max-length="100" tb-text-box-required="false" tb-text-box-validation="tb-email-input-validator" tb-test-id="add-local-user-email-textbox" tb-text-box-disabled="busy"></tb:text-box></td></tr><tr ng-if="isSiteMode()"><td class="tb-text-input-label-cell">Site role:</td><td class="tb-settings-control tb-input-wide"><tb:select ng-model="siteRole" ng-change="setSiteRole(siteRole)" match-button-width="true" tb-disabled="busy || undefined" class="tb-select-site-role-menu"><tb:select-none>Select a role for these users</tb:select-none><tb:select-option ng-repeat="siteRoleOption in siteRoleOptions" value="siteRoleOption" tb-disabled="isSiteRoleOptionDisabled(siteRoleOption)">{{ siteRoleOption | siteRole }}</tb:select-option></tb:select></td><td class="tb-settings-control"><span tb-popover="'siteRolePermissionsPopover.html'" tb-popover-class="tb-site-role-permissions-popover" tb-popover-delay="150" class="tb-icon-help"></span></td></tr><tr ng-if="isServerMode()"><td colspan="2"><div tb-test-id="picker-control" class="tb-picker-container tb-picker-border"><tb:site-roles-picker changes="siteRoleChanges" busy="busy"></tb:site-roles-picker></div></td></tr></tbody><tbody ng-if="formModel.formState === 'otherSite'" class="tb-otherSiteFlow-table"><tr><td class="tb-text-input-label-cell"><label>Display name:</label></td><td class="tb-immutable-text-cell"><label>{{ formModel.otherSiteFlowModel.displayName }}</label></td></tr><tr><td></td><td class="tb-warning-cell"><span tb-button-click="proceed()" tb-disabled="formModel.otherSiteFlowModel.proceedClicked" class="tb-outline-button tb-proceed-button"><span>Proceed</span></span><span class="tb-warning-text">{{ formModel.otherSiteFlowModel.warningText }}</span></td></tr><tr ng-if="isSiteMode()"><td class="tb-text-input-label-cell">Site role:</td><td class="tb-settings-control tb-input-wide"><tb:select ng-model="siteRole" ng-change="setSiteRole(siteRole)" match-button-width="true" tb-disabled="busy || !proceedClicked()" class="tb-select-site-role-menu"><tb:select-none>Select a role for these users</tb:select-none><tb:select-option ng-repeat="siteRoleOption in siteRoleOptions" value="siteRoleOption" tb-disabled="isSiteRoleOptionDisabled(siteRoleOption)">{{ siteRoleOption | siteRole }}</tb:select-option></tb:select></td><td class="tb-settings-control"><span tb-popover="'siteRolePermissionsPopover.html'" tb-popover-class="tb-site-role-permissions-popover" tb-popover-delay="150" class="tb-icon-help"></span></td></tr></tbody><tbody ng-if="formModel.formState === 'notAvailable'" class="tb-notAvailableFlow-table"><tr><td class="tb-text-input-label-cell"><label>Display name:</label></td><td class="tb-immutable-text-cell"><label>{{ formModel.notAvailableFlowModel.displayName }}</label></td></tr><tr><td></td><td class="tb-error-cell"><div class="tb-error-text">{{ formModel.notAvailableFlowModel.errorText }}</div><div class="tb-error-text">Try another username.</div></td></tr></tbody></table><div ng-if="availableQuota &lt;= 0" class="tb-no-quota-available-message">Only unlicensed users may be added until more quota is purchased or made available by removing existing users.</div><div class="tb-error-text">{{ formModel.errorText }}</div><div ng-show="$parent.addLocalUserForm.$error.username" class="tb-error-text">Username may not contain any of the following characters:<div>; ,</div></div><div ng-show="$parent.addLocalUserForm.$error.match &amp;&amp; passwordFieldsAreNonEmpty()" class="tb-error-text">Passwords must match</div><div class="tb-dialog-actions"><button tb-button-click="dismiss()" tb-disabled="busy" type="button" tb-test-id="confirm-action-dialog-cancel" class="tb-outline-button tb-cancel-button">Cancel</button><button type="submit" tb-focus="true" tb-disabled="isConfirmDisabled()" tb-test-id="confirm-action-dialog-confirm" class="tb-outline-button tb-go-button tb-margin-left-wide"><span ng-show="busy" class="tb-icon-spinner tb-lr-padded-narrow"></span><span>Create</span></button></div></form>