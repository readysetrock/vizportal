<div tb-test-id="picker-control" class="tb-fill tb-site-roles-picker"><div class="tb-site-membership-filters"><tb:select ng-model="siteFilter.selection" match-button-width="true" class="tb-site-membership-select"><tb:select-option ng-repeat="filter in siteFilters" value="filter"><span translate="{{filter}}"></span></tb:select-option></tb:select><span tb-test-id="membership-search-panel" class="tb-search-panel"><div class="tb-search-box"><tb:text-box tb-text-box-model="searchInput.text" tb-text-box-enter="submitSearch(searchInput.text, $event)" ng-keyup="_.debounce(submitSearch(searchInput.text), 200)" tb-text-box-clearable="true" tb-text-box-clear="submitSearch('')" tb-text-box-placeholder="'Pesquisar sites'"></tb:text-box><a tb-button-click="submitSearch(searchInput.text, $event)" class="tb-search-button">Pesquisar sites</a></div></span></div><div ng-if="!users.isEmpty()" class="tb-bottom tb-grid-container"><tb:template-list templates="headers"><tb:template></tb:template><tb:template key="name"><div class="tb-data-grid-header-text">Site<span ng-if="needsAssignedSitesRefresh" title="Remover grupos não atribuídos desta lista" ng-click="refreshAssignedSites()" class="tb-refresh-button"></span></div></tb:template><tb:template key="column_site_role"><span class="tb-site-role-column-header"><span class="tb-data-grid-header-text">Função de site</span><span tb-popover="'siteRolePermissionsPopover.html'" tb-popover-class="tb-site-role-permissions-popover-tall" tb-popover-delay="150" class="tb-header-row-icon tb-icon-help"></span></span></tb:template></tb:template-list><tb:template-list templates="cells"><tb:template><span ng-class="{ 'tb-dirty' : isRowDirty(row) }" class="tb-checkbox-cell"><tb:checkbox-tristate state="checkboxState(row)" tb-disabled="modifySiteRolesDisabled() || busy"></tb:checkbox-tristate></span></tb:template><tb:template><span title="{{ row.name }}" tb-typeahead-format="searchInput.text" class="tb-lr-padded-wide">{{ row.name }}</span></tb:template><tb:template><tb:popup-menu tb-test-id="select-site-role-menu" tb-disabled="modifySiteRolesDisabled() || busy" ng-class="{'tb-hidden': checkboxState(row) === 'empty'}" class="tb-select-site-role-menu"><tb:popup-menu-button ng-class="{ 'tb-dirty' : isRowDirty(row) }">{{ siteRole(row) | siteRole }}</tb:popup-menu-button><tb:popup-menu-content match-button-width="true"><div tb-button-click="popupMenu.close()"><div ng-if="siteRole(row) === 'siteRole_Mixed'" translate="siteRole_Mixed" tb-button-click="setSiteRole(row, 'siteRole_Mixed')" class="tb-popup-menu-item"></div><div ng-repeat="option in selectCtrl.options" tb-button-click="setSiteRole(row, option)" class="tb-popup-menu-item"><span tb-visible="siteRole(row) === option" class="tb-padded-right">&bull;</span><span>{{ option | siteRole }}</span></div></div></tb:popup-menu-content></tb:popup-menu></tb:template></tb:template-list><tb:data-grid headers="headers" cells="cells" items="sliceable" column-widths="columnWidths" row-height="37" row-clicked="checkboxClicked(row, colIndex)" empty-template="'noAssignedSites.html'" empty-template-model="emptyTemplateModel" class="tb-hide-current-row"></tb:data-grid></div><div ng-class="{ 'tb-dirty' : !!changes.serverAdmin }" class="tb-admin-checkbox"><tb:checkbox-tristate state="adminCheckboxState()" click="adminCheckboxClicked()" tb-disabled="busy" tb-test-id="server-admin-checkbox"></tb:checkbox-tristate><span tb-button-click="adminCheckboxClicked()" class="tb-label">Os usuários selecionados são Administradores de servidor</span></div></div>