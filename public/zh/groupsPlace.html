<div class="tb-tabs-banner"><span tb-button-click="placeTitleClicked()" class="tb-tabs-banner-title tb-clickable"><span class="tb-label">组</span><span tb-test-id="subplace-tab-count" class="tb-count">{{ model.itemsCount | localizedCount }} &nbsp;</span></span></div><div class="tb-tabs-banner-subplace"><div class="tb-fill"><div class="tb-action-bar"><div class="tb-action-bar-left"><span class="tb-box tb-row tb-margin-right-wide"><span tb-button-click="filterControls.clearAllFilters(); displaySettings.showFilterPanel = !displaySettings.showFilterPanel;" tb-test-id="toggle-filter-panel" tb-selected="displaySettings.showFilterPanel" title="筛选器" class="tb-filter-panel-toggle-button"></span></span><span ng-repeat="action in listActions | filter:availableListAction" class="tb-box"><span tabindex="0" tb-button-click="action.execute($event)" tb-test-id="action-{{action.name}}" class="tb-outline-button tb-new-button tb-row tb-margin-right-wide"><span class="tb-create-new-icon"></span><span translate="{{action.translate || action.name}}"></span></span></span><tb:selection-menu selection="selectedItems" sliceable="sliceable"></tb:selection-menu><span ng-if="showActionMenu()" class="tb-box"><span class="tb-action-bar-divider"></span><span class="tb-box tb-row"><tb:popup-menu direction="dr"><tb:popup-menu-text-button tb-test-id="action-menu-button" class="tb-small">动作</tb:popup-menu-text-button><tb:popup-menu-content><div tb-button-click="popupMenu.close()"><div ng-repeat="action in menuActions | filter:availableAction" tb-button-click="action.execute(selectedItems, actionMenuContext(popupMenu.button), detailedItem)" tb-test-id="action-{{action.name}}" tb-disabled="!!action.isDisabled(selectedItems, detailedItem, allowedActions)" translate="{{action.translate || action.name}}" class="tb-popup-menu-item"></div></div></tb:popup-menu-content></tb:popup-menu></span></span></div></div><div ng-if="displaySettings.showFilterPanel" ng-controller="FilterPanelCtrl" class="tb-filter-panel"><script type="text/ng-template" id="inline_filter_date.html"><div class="tb-filter-label"><span translate="{{filter.definition.name}}"></span><a ng-show="!!filter.value" tb-button-click="filter.value = filter.definition.clearValue" class="tb-clear-link">清除</a></div><tb:popup-menu direction="dr"><tb:popup-menu-button><div title="{{ filter.value | localizedDate }}" class="tb-filter-popup-menu-button-text">{{ filter.value | localizedDate }}</div></tb:popup-menu-button><tb:popup-menu-content><tb:date-picker selected-date="filter.value" on-select="popupMenu.close()"></tb:date-picker></tb:popup-menu-content></tb:popup-menu></script><script type="text/ng-template" id="inline_filter_typeahead.html"><div class="tb-filter-label"><span translate="{{filter.definition.name}}"></span><a ng-show="!!filter.value" tb-button-click="filter.value = filter.definition.clearValue" class="tb-clear-link">清除</a></div><tb:typeahead-filter></tb:typeahead-filter></script><script type="text/ng-template" id="inline_filter_boolean.html"><span tabindex="0" tb-button-click="filter.value = !filter.value" tb-space="filter.value = !filter.value" ng-class="{ 'tb-checked': filter.value }" translate="{{filter.definition.name}}" class="tb-checkbox tb-with-label"></span></script><script type="text/ng-template" id="inline_filter_select.html"><div class="tb-filter-label"><span translate="{{filter.definition.name}}"></span></div><tb:select ng-model="filter.value" match-button-width="true"><tb:select-option ng-repeat="option in filter.definition.options" value="option.value" count="option.count"><span tb-test-id="option-value-{{option.value}}">{{option.translate | translate}}</span></tb:select-option></tb:select></script><script type="text/ng-template" id="inline_filter_text.html"><div class="tb-filter-label"><span translate="{{filter.definition.name}}"></span></div><tb:text-box tb-text-box-model="filter.value" tb-text-box-model-options="{updateOn: 'enter clear'}" tb-text-box-clear-value="filter.clear" tb-text-box-clearable="true"></tb:text-box></script><script type="text/ng-template" id="inline_filter_textDropdown.html"><div class="tb-filter-label"><span translate="{{filter.definition.name}}"></span></div><tb:text-dropdown ng-model="filter.value" option-list="filter.definition.options" tb-prevent-input="!filter.definition.isValid(value)"></tb:text-dropdown></script><div class="tb-filter-panel-filters"><div class="tb-clear-all-filters"><a ng-if="anyFiltersActive" tabindex="0" tb-button-click="filterControls.clearAllFilters()" tb-enter="filterControls.clearAllFilters()" tb-test-id="clear-all-filters">清除所有筛选器</a></div><div class="tb-search-filter"><div class="tb-search-panel"><div class="tb-search-box"><tb:text-box tb-text-box-max-length="200" tb-text-box-model="searchText" tb-text-box-enter="submitSearch(searchText, $event)" tb-text-box-clearable="true" tb-text-box-clear="submitSearch('')" tb-test-id="filter-search"></tb:text-box></div><div class="tb-search-button-wrapper"><a tb-button-click="submitSearch(searchText)" title="搜索" tb-test-id="filter-search-button" class="tb-search-button"></a></div></div></div><div ng-if="anyGeneralFilters()" class="tb-filter-section"><div class="tb-filter-section-header">常规筛选器</div><div ng-repeat="filter in filters | filter:generalFilter" tb-test-id="{{'filter-' + filter.definition.name}}"><div ng-include="'inline_filter_' + filter.definition.type + '.html'" class="tb-filter"></div></div><div class="tb-filter-checkboxes"><div ng-repeat="filter in filters | filter:generalCheckbox" tb-test-id="{{'filter-' + filter.definition.name}}"><div ng-include="'inline_filter_' + filter.definition.type + '.html'" class="tb-filter"></div></div></div></div><div ng-if="anyDatasourceFilters()" class="tb-filter-section"><div class="tb-filter-section-header">数据源筛选器</div><div ng-repeat="filter in filters | filter:datasourceFilter" tb-test-id="{{'filter-' + filter.definition.name}}"><div ng-include="'inline_filter_' + filter.definition.type + '.html'" class="tb-filter"></div></div><div class="tb-filter-checkboxes"><div ng-repeat="filter in filters | filter:datasourceCheckbox" tb-test-id="{{'filter-' + filter.definition.name}}"><div ng-include="'inline_filter_' + filter.definition.type + '.html'" class="tb-filter"></div></div></div></div></div><div class="tb-filter-panel-divider"></div></div><div ng-class="{'tb-with-filter-panel': displaySettings.showFilterPanel}" class="tb-items-panel"><tb:react-data-grid props="dataGridProps" ng-if="reactDataGridInGroupsPlace" ng-class="{'tb-data-grid-margin-left':!displaySettings.showFilterPanel}"></tb:react-data-grid><span ng-if="!reactDataGridInGroupsPlace"><tb:template-list templates="headers"><tb:template></tb:template><tb:template key="name" resizable="resizable" clickable="clickable" direction="asc"><span ng-class="{'tb-sort-asc':sorter.isSortAscendingBy('name'),'tb-sort-desc':sorter.isSortDescendingBy('name')}" class="tb-data-grid-header-text">名称</span></tb:template><tb:template></tb:template><tb:template key="domainName" resizable="resizable" clickable="clickable" direction="asc" template-if="isAD"><span ng-class="{'tb-sort-asc':sorter.isSortAscendingBy('domainName'),'tb-sort-desc':sorter.isSortDescendingBy('domainName')}" class="tb-data-grid-header-text">域</span></tb:template><tb:template key="userCount" resizable="resizable" clickable="clickable" direction="asc" numeric="numeric"><span ng-class="{'tb-sort-asc':sorter.isSortAscendingBy('userCount'),'tb-sort-desc':sorter.isSortDescendingBy('userCount')}" class="tb-data-grid-header-text">用户数</span></tb:template><tb:template key="minimumSiteRole" resizable="resizable" clickable="clickable" direction="asc" template-if="showMinimumSiteRole"><span ng-class="{'tb-sort-asc':sorter.isSortAscendingBy('minimumSiteRole'),'tb-sort-desc':sorter.isSortDescendingBy('minimumSiteRole')}" class="tb-data-grid-header-text">最低站点角色</span></tb:template></tb:template-list><tb:template-list templates="cells"><tb:template default-width="27"><span class="tb-checkbox-cell"><tb:checkbox checked="selectedItems.contains(row)" tb-disabled="disabledItems.contains(row)" tb-space="rowClicked(row, 0);"></tb:checkbox></span></tb:template><tb:template><a ui-sref="main.site.group.users({ id: row.id })" class="tb-lr-padded-wide tb-prevent-data-grid-events"><span title="组" class="tb-prevent-data-grid-events tb-grid-icon-group"></span><span title="{{ row.name }}" class="tb-prevent-data-grid-events tb-cell-height-padding">{{ row.name }}</span></a></tb:template><tb:template icon="icon" default-width="27"><tb:popup-menu><tb:popup-menu-custom-button class="tb-data-grid-action-menu"><span class="tb-action-icon"></span></tb:popup-menu-custom-button><tb:popup-menu-content><div ng-include="'actionMenu.html'"></div></tb:popup-menu-content></tb:popup-menu></tb:template><tb:template template-if="isAD"><span title="{{ getDomainString(row) }}" class="tb-lr-padded-wide">{{ getDomainString(row) }}</span></tb:template><tb:template numeric="numeric"><span title="{{ row.userCount | localizedCount }}" class="tb-lr-padded-wide">{{ row.userCount | localizedCount }}</span></tb:template><tb:template template-if="showMinimumSiteRole"><span title="{{ row.minimumSiteRole | siteRole }}" class="tb-lr-padded-wide">{{ row.minimumSiteRole | siteRole }}</span></tb:template></tb:template-list><tb:data-grid headers="headers" cells="cells" items="sliceable" is-row-selected="selectedItems.contains(row)" header-clicked="headerClicked(header)" row-clicked="rowClicked(row, colIndex)" rows-clickable="anyActionsAllowed()" slice-changed="sliceChanged(newSlice)" empty-template="'emptyDataGridTemplate.html'" empty-template-model="emptyTemplateModel" class="tb-show-lines tb-hide-current-row" ng-class="{'tb-data-grid-margin-left':!displaySettings.showFilterPanel}"></tb:data-grid></span></div></div></div>