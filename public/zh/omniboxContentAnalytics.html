<span class="tb-omnibox"><div class="tb-omnibox-text-box"><div class="tb-search-box"><tb:text-box tb-test-id="omnibox-input-id" tb-text-box-model="searchText" tb-text-box-keydown="keydown($event)" tb-text-box-placeholder="'搜索'" tb-text-box-name="{{ textBoxName }}" tb-text-box-clearable="true" tb-text-box-clear="clearSearch()"></tb:text-box></div><a class="tb-search-button">搜索</a></div><tb:popup show="showResults || showNoResults" position-corner="bl" content-corner="tl"><div tb-mousedown-outside="close($event)" tb-button-click="close()" class="tb-omnibox-popup"><div ng-if="showResults" tb-max-height="popupMaxHeight()" class="tb-omnibox-results"><div ng-if="views.items.length &gt; 0" data-tb-test-id="omnibox-result-section-views" class="tb-omnibox-section"><div class="tb-omnibox-section-header"><span data-tb-test-id="omnibox-result-section-name-views">视图</span><a ng-if="showSeeAll(views, 'views')" ng-href="{{ seeAllHref('main.site.content.site.views') }}" data-tb-test-id="omnibox-result-section-see-all-views" class="tb-omnibox-see-all">查看全部</a></div><div class="tb-omnibox-section-content"><a ng-repeat="item in views.items" ng-href="{{ itemHref('main.site.viz', {path: item.path}) }}" tb-button-down="selectItem('views', $index)" tb-selected="isItemSelected('views', $index)" data-tb-test-id="omnibox-result-item-views" title="{{tooltipForView(item)}}" class="tb-omnibox-menu-item"><tb:thumbnail-image props="{ url: item.thumbnailUrl, tbTestId: 'thumbnailImage', className: 'tb-omnibox-menu-item-icon'}"></tb:thumbnail-image><div class="tb-omnibox-menu-item-details"><div data-tb-test-id="omnibox-result-item-name" class="tb-omnibox-menu-item-name">{{ item.name }}</div><div class="tb-omnibox-menu-item-stats"><span class="tb-omnibox-menu-item-stat"><span translate="metric_hits_count" translate-values="{COUNT: item.hitsTotal}" translate-interpolation="localizedCountEscaped" tb-width="100" data-tb-test-id="omnibox-result-item-hits-total" class="tb-omnibox-menu-item-stat-text"></span></span><span class="tb-omnibox-menu-item-stat"><span ng-class="item.favorite ? 'tb-favorite' : 'tb-not-favorite'" class="tb-omnibox-menu-item-stat-icon"></span><span data-tb-test-id="omnibox-result-item-favorites-total" class="tb-omnibox-menu-item-stat-text">{{ item.favoritesTotal | localizedCount }}</span></span></div></div></a></div></div><div ng-if="workbooks.items.length &gt; 0" data-tb-test-id="omnibox-result-section-workbooks" class="tb-omnibox-section"><div class="tb-omnibox-section-header"><span data-tb-test-id="omnibox-result-section-name-workbooks">工作簿</span><a ng-if="showSeeAll(workbooks, 'workbooks')" ng-href="{{ seeAllHref('main.site.content.site.workbooks') }}" data-tb-test-id="omnibox-result-section-see-all-workbooks" class="tb-omnibox-see-all">查看全部</a></div><div class="tb-omnibox-section-content"><a ng-repeat="item in workbooks.items" ng-href="{{ itemHref('main.site.content.workbook.views', {id: item.id}) }}" tb-button-down="selectItem('workbooks', $index)" tb-selected="isItemSelected('workbooks', $index)" data-tb-test-id="omnibox-result-item-workbooks" title="{{tooltipForWorkbook(item)}}" class="tb-omnibox-menu-item"><tb:thumbnail-image props="{ url: item.thumbnailUrl, tbTestId: 'thumbnailImage', className: 'tb-omnibox-menu-item-icon'}"></tb:thumbnail-image><div class="tb-omnibox-menu-item-details"><div data-tb-test-id="omnibox-result-item-name" class="tb-omnibox-menu-item-name">{{ item.name }}</div><div class="tb-omnibox-menu-item-stats"><span class="tb-omnibox-menu-item-stat"><span translate="metric_hits_count" translate-values="{COUNT: item.hitsTotal}" translate-interpolation="localizedCountEscaped" tb-width="100" data-tb-test-id="omnibox-result-item-hits-total" class="tb-omnibox-menu-item-stat-text"></span></span><span class="tb-omnibox-menu-item-stat"><span ng-class="item.favorite ? 'tb-favorite' : 'tb-not-favorite'" class="tb-omnibox-menu-item-stat-icon"></span><span data-tb-test-id="omnibox-result-item-favorites-total" class="tb-omnibox-menu-item-stat-text">{{ item.favoritesTotal | localizedCount }}</span></span></div></div></a></div></div><div ng-if="datasources.items.length &gt; 0" data-tb-test-id="omnibox-result-section-datasources" class="tb-omnibox-section"><div class="tb-omnibox-section-header"><span data-tb-test-id="omnibox-result-section-name-datasources">数据源</span><a ng-if="showSeeAll(datasources, 'datasources')" ng-href="{{ seeAllHref('main.site.content.site.datasources') }}" data-tb-test-id="omnibox-result-section-see-all-datasources" class="tb-omnibox-see-all">查看全部</a></div><div class="tb-omnibox-section-content"><a ng-repeat="item in datasources.items" ng-href="{{ itemHref('main.site.content.datasource.connectedWorkbooks', {id: item.id}) }}" tb-button-down="selectItem('datasources', $index)" tb-selected="isItemSelected('datasources', $index)" data-tb-test-id="omnibox-result-item-datasources" title="{{tooltipForDataSource(item)}}" class="tb-omnibox-menu-item"><div class="tb-omnibox-menu-item-icon tb-datasources"></div><div class="tb-omnibox-menu-item-details"><div data-tb-test-id="omnibox-result-item-name" class="tb-omnibox-menu-item-name">{{ item.name }}</div><div class="tb-omnibox-menu-item-stats"><span class="tb-omnibox-menu-item-stat"><span data-tb-test-id="omnibox-result-item-datasource-type" class="tb-omnibox-menu-item-stat-text">{{ item.connectionTypeDisplayName }}</span><span class="tb-omnibox-menu-item-stat-text tb-omnibox-menu-item-stat-separator">&bull;</span><span data-tb-test-id="omnibox-result-item-datasource-extract-type" class="tb-omnibox-menu-item-stat-text">{{ item.lastRefreshedAt ? 'extract' : 'live' | translate }}</span></span></div></div></a></div></div><div ng-if="projects.items.length &gt; 0" data-tb-test-id="omnibox-result-section-projects" class="tb-omnibox-section"><div class="tb-omnibox-section-header"><span data-tb-test-id="omnibox-result-section-name-projects">项目</span><a ng-if="showSeeAll(projects, 'projects')" ng-href="{{ seeAllHref('main.site.content.site.projects') }}" data-tb-test-id="omnibox-result-section-see-all-projects" class="tb-omnibox-see-all">查看全部</a></div><div class="tb-omnibox-section-content"><a ng-repeat="item in projects.items" ng-href="{{ itemHref('main.site.content.project.workbooks', {id: item.id}) }}" tb-button-down="selectItem('projects', $index)" tb-selected="isItemSelected('projects', $index)" data-tb-test-id="omnibox-result-item-projects" title="{{item.name}}" class="tb-omnibox-menu-item"><div class="tb-omnibox-menu-item-icon tb-projects"></div><div class="tb-omnibox-menu-item-details"><div data-tb-test-id="omnibox-result-item-name" class="tb-omnibox-menu-item-name">{{ item.name }}</div><div class="tb-omnibox-menu-item-stats"><span class="tb-omnibox-menu-item-stat"><span class="tb-omnibox-menu-item-stat-icon tb-workbook"></span><span data-tb-test-id="omnibox-result-item-workbook-count" class="tb-omnibox-menu-item-stat-text">{{ item.workbookCount | localizedCount }}</span></span><span class="tb-omnibox-menu-item-stat"><span class="tb-omnibox-menu-item-stat-icon tb-datasource"></span><span data-tb-test-id="omnibox-result-item-datasource-count" class="tb-omnibox-menu-item-stat-text">{{ item.datasourceCount | localizedCount }}</span></span></div></div></a></div></div><div ng-if="users.items.length &gt; 0" data-tb-test-id="omnibox-result-section-users" class="tb-omnibox-section"><div class="tb-omnibox-section-header"><span data-tb-test-id="omnibox-result-section-name-users">用户数</span><a ng-if="showSeeAll(users, 'users')" ng-href="{{ seeAllHref('main.site.users') }}" data-tb-test-id="omnibox-result-section-see-all-users" class="tb-omnibox-see-all">查看全部</a></div><div class="tb-omnibox-section-content"><a ng-repeat="item in users.items" ng-href="{{ itemHref('main.site.user.workbooks', {username: item.username, domainName: item.domainName}) }}" tb-button-down="selectItem('users', $index)" tb-selected="isItemSelected('users', $index)" data-tb-test-id="omnibox-result-item-users" title="{{item.displayName}} ({{item.username}})" class="tb-omnibox-menu-item"><div class="tb-omnibox-menu-item-icon tb-users"></div><div class="tb-omnibox-menu-item-details"><div data-tb-test-id="omnibox-result-item-name" class="tb-omnibox-menu-item-name">{{ item.displayName }}</div><div class="tb-omnibox-menu-item-stats"><span class="tb-omnibox-menu-item-stat"><span data-tb-test-id="omnibox-result-item-username" class="tb-omnibox-menu-item-stat-text">{{ item.username }}</span></span></div></div></a></div></div></div><div ng-if="showNoResults" class="tb-omnibox-no-results"><div class="tb-omnibox-no-results-icon"></div><div class="tb-omnibox-no-results-text">未找到结果。</div></div></div></tb:popup></span>