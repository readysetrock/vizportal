<div class="tb-tabs-banner-subplace"><div class="tb-scroll"><div class="tb-settings-container tb-settings-section"><div class="tb-site-authentication"><div class="tb-setting-group"><div class="tb-group-name">接続されたクライアント</div><div class="tb-group-content"><div class="tb-settings-msg">ユーザーが最初にサインイン認証資格情報を提供した後も、モバイル アプリ、同期クライアントなどの Tableau クライアントは、このサイトに対する認証済みの状態を保持できます。接続は、ユーザーの認証資格情報を保存せず、各ユーザーとクライアントを一意に特定するセキュア トークンを使用して確立されます。</div><tb:checkbox-group><tb:checkbox ng-model="siteSettingsForSiteAdmin.siteAdminSettings.refreshTokenEnabled"></tb:checkbox><tb:checkbox-label>この Tableau Online サイトで接続されたクライアントを許可します。</tb:checkbox-label></tb:checkbox-group></div></div><div class="tb-setting-group"><div class="tb-connected-clients"></div><div class="tb-group-name">このサイトの認証</div><div ng-if="!allowed" class="tb-settings-msg"><div ng-bind-html="contactCustomerSupport() | locLinkifier"></div></div><div class="tb-group-content"><div class="tb-static-checkmark"></div><div class="tb-checkbox-label">TableauID</div><div class="tb-checkbox-indent">すべてのサイトの既定の認証タイプ</div></div><div tb-disabled="!allowed" class="tb-group-content"><tb:checkbox-group><tb:checkbox ng-model="configuration.enabled" tb-disabled="!allowed"></tb:checkbox><tb:checkbox-label>SAML シングル サインオン</tb:checkbox-label><span ng-if="configuration.enabled" class="tb-enabled-color">&nbsp;-&nbsp;SAML が有効です</span><span ng-if="!configuration.enabled">&nbsp;-&nbsp;SAML が有効ではありません</span></tb:checkbox-group><div class="tb-checkbox-indent">サインオンを有効にするには、SAML をサポートするアイデンティティ プロバイダー (IdP)、および IdP 内のメール アドレスにマッピングされた各ユーザーのメール アドレスが必要です。</div><div class="tb-checkbox-indent">&nbsp;</div><div class="tb-checkbox-indent">シングル サインオンで SAML を使用するには、次の手順に従ってください。</div></div></div><div tb-disabled="!isEnabled()" class="tb-site-authentication-settings"><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">1</span>Tableau Online からメタデータ ファイルをエクスポート</div><div class="tb-group-content">IdP が要求するメタデータを取得するオプションを選択してください。<div class="tb-auth-options-list"><div class="tb-auth-options-list-item">&#x25cf;&nbsp;必要なすべてのメタデータを含む単一の XML ファイルを保存します。&nbsp;<input type="button" value="メタデータのエクスポート" tb-button-click="download($event, configuration.serviceProviderEntityId)" tb-disabled="!isEnabled()" class="tb-outline-button"/></div><div>または</div><div class="tb-auth-options-list-item">&#x25cf;&nbsp;Tableau Online エンティティ ID と ACS URL を個別にコピーして、X.509 証明書を CER ファイルにダウンロードします。</div></div><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">Tableau Online エンティティ ID</div><input type="text" readonly="readonly" value="{{configuration.serviceProviderEntityId}}" tb-disabled="!isEnabled()" class="tb-url-holder"/></div><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">アサーション コンシューマー サービス URL (ACS)</div><input type="text" readonly="readonly" value="{{configuration.acsUrl}}" tb-disabled="!isEnabled()" class="tb-url-holder"/></div></div><div class="tb-auth-options-right-align"><input type="button" value="署名および暗号化証明書のダウンロード" tb-button-click="download($event, configuration.certificateUrl)" tb-disabled="!isEnabled()" class="tb-outline-button"/></div></div><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">2</span><span class="tb-dark-highlight">外部ステップ:</span>&nbsp;IdP にメタデータ ファイルをインポート</div><div class="tb-group-content">アイデンティティ プロバイダーのサイトにアクセスして、SAML の構成に関する指示に従ってください。IdP によって異なりますが、ステップ 1 でエクスポートしたメタデータ ファイルをインポートするか、エンティティ ID、ACS URL、証明書を個別に追加します。</div></div><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">3</span><span class="tb-dark-highlight">外部ステップ:</span>&nbsp;IdP からメタデータ ファイルをエクスポート</div><div class="tb-group-content">IdP からメタデータ ファイルをエクスポートまたは自分のメタデータ ファイルを構築。</div></div><div class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">4</span>Tableau Online にメタデータ ファイルをインポート</div><form action="{{endpoint}}" enctype="multipart/form-data" method="POST" target="{{iframeId}}" name="updateIdentityProviderForm" class="tb-form-indent"><tb:file-input filename-localization-key="siteAuthenticationIdPMetadataFile" name="entity_descriptor" required="required" class="tb-padded-box"></tb:file-input><input type="hidden" value="{{xsrfToken}}" name="XSRF-TOKEN"/><span class="tb-padded-box"><button type="submit" tb-disabled="!isEnabled()" translate="apply" class="tb-outline-button"></button></span><tb:upload-iframe iframe-id="iframeId" name="{{iframeId}}" handle-result="handleFormSubmitResult(result)"></tb:upload-iframe></form><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">IdP エンティティ ID</div><input type="text" readonly="readonly" value="{{configuration.identityProviderEntityId}}" tb-disabled="!isIdentityProviderConfigured()" class="tb-url-holder"/></div><div class="tb-auth-options-right-align"><div class="tb-auth-options-label">SSO サービス URL</div><input type="text" readonly="readonly" value="{{configuration.ssoServiceURL}}" tb-disabled="!isIdentityProviderConfigured()" class="tb-url-holder"/></div><div ng-show="isIdentityProviderConfigured() &amp;&amp; configuration.isSingleLogoutSupported" class="tb-auth-options-left-margin">IdP は SAML シングル ログアウト (SLO) をサポートするように構成されています</div><div ng-show="isIdentityProviderConfigured() &amp;&amp; !configuration.isSingleLogoutSupported" class="tb-auth-options-left-margin">IdP は SAML シングル ログアウト (SLO) をサポートするように構成されていません</div><div class="tb-auth-options-right-align tb-label-padding"><input type="button" value="ログインのテスト" tb-button-click="testLogin()" tb-disabled="!isIdentityProviderConfigured()" class="tb-outline-button tb-float-left tb-auth-options-left-margin"/><input type="button" value="アイデンティティ プロバイダーの削除" tb-button-click="removeIdentityProvider()" tb-disabled="!isIdentityProviderConfigured()" class="tb-outline-button"/></div></div><!-- this will be probably inside a form when the functionality is implemented--><div tb-disabled="!isIdentityProviderConfigured()" class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">5</span>アサーションの一致</div><div class="tb-group-content">アサーションには、ユーザーに関する認証とその他の属性が含まれます。ここで、Tableau Online が必要とする情報が含まれる IdP アサーション名を指定することができます。アサーション名は、IdP の SAML 構成で見つけることができます。</div><div class="tb-group-content tb-auth-assertions tb-label-padding"><span class="tb-auth-table-header tb-auth-table-header-left">Tableau Online の属性</span><span class="tb-auth-table-header tb-auth-table-header-right">アイデンティティ プロバイダー (IdP) のアサーション名</span><table><tr><td>メール<br/>認証が成功するためには、メール アドレスが一致している必要があります。</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.emailMapping" tb-disabled="!isIdentityProviderConfigured()"></tb:text-box></td></tr></table><table><tr><td colspan="3">表示名</td></tr><tr><td colspan="3">IdP が情報を保存する方法に基づいて、名と姓用のアサーション名、またはフル ネーム用のアサーション名を提供します。Tableau Online はこれらのアサーションを使用して、表示名を設定します。</td></tr><tr class="tb-auth-assertion-grouping"><td rowspan="2" class="tb-auth-assertions-radio"><input type="radio" name="assertion" tb-disabled="!isIdentityProviderConfigured()" ng-model="configuration.siteSAMLAttributeMapping.useFullName" ng-value="false"/></td><td class="tb-auth-assertions-radio-label">名</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.firstNameMapping" tb-disabled="!isIdentityProviderConfigured() || configuration.siteSAMLAttributeMapping.useFullName"></tb:text-box></td></tr><tr class="tb-auth-assertion-grouping"><td class="tb-auth-assertions-radio-label">姓</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.lastNameMapping" tb-disabled="!isIdentityProviderConfigured() || configuration.siteSAMLAttributeMapping.useFullName"></tb:text-box></td></tr><tr><td colspan="3"></td></tr><tr class="tb-auth-assertion-grouping"><td class="tb-auth-assertions-radio"><input type="radio" name="assertion" tb-disabled="!isIdentityProviderConfigured()" ng-model="configuration.siteSAMLAttributeMapping.useFullName" ng-value="true"/></td><td class="tb-auth-assertions-radio-label">フル ネーム</td><td><tb:text-box tb-text-box-model="configuration.siteSAMLAttributeMapping.fullNameMapping" tb-disabled="!isIdentityProviderConfigured() || !configuration.siteSAMLAttributeMapping.useFullName"></tb:text-box></td></tr></table><div class="tb-auth-options-right-align"><button type="submit" tb-disabled="!isEnabled()" translate="apply" tb-button-click="setSiteAttributeMapping()" class="tb-outline-button"></button></div></div></div><div tb-disabled="!isIdentityProviderConfigured()" class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">6</span>ユーザーの選択</div><div class="tb-group-content">SAML でサインインするユーザーを指定</div><div class="tb-group-content tb-users"><table><tr><td class="tb-users-link"><a ui-sref="main.site.users">ユーザーを表示</a></td><td>&nbsp;-&nbsp;Tableau Online ユーザー リストからユーザーを選択</td></tr><tr><td class="tb-users-link"><a ng-click="openAddExternalUsersDialog($event)">ユーザーの追加</a></td><td>&nbsp;-&nbsp;新しいユーザーのメール アドレスを入力</td></tr></table></div></div><div tb-disabled="!isIdentityProviderConfigured()" class="tb-setting-group"><div class="tb-group-name"><span class="tb-group-number">7</span>Tableau Online を使用して認証する</div><div class="tb-group-content">承認されたユーザーはシングル サインオンで Tableau Online にアクセスできます<br/>ユーザーに認証の問題が発生している場合、次のアクションによってトラブルシューティングが可能です:<div class="tb-auth-options-list"><div class="tb-auth-options-list-item">&#x25cf;&nbsp;アサーション一致問題のトラブルシューティング (ステップ 5)&nbsp;<input type="button" value="ダウンロード ログ ファイル" tb-button-click="download($event, downloadLogUrl())" tb-disabled="!isIdentityProviderConfigured()" class="tb-outline-button"/></div><div class="tb-auth-options-list-item">&#x25cf;&nbsp;オンラインから IdP へのデータ、証明書の再エクスポート (ステップ 1-3)</div><div class="tb-auth-options-list-item">&#x25cf;&nbsp;新しいメタデータ ファイルの再読み込み (ステップ 4)</div></div><div>このページの下部にある [SAML シングル サインオン] チェックボックスをオフにして、SAML を無効化してください</div></div></div></div></div></div></div></div>